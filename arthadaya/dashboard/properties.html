<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Arthadaya — Kelola Properti</title>
    <meta name="description"
        content="Kelola daftar properti Arthadaya, termasuk menambah, mengedit, dan menghapus properti minimalis modern dengan gambar." />
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Custom Tailwind config
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: "#F9F1E7",
                            100: "#F9F1E7",
                            200: "#E5E5E5",
                            300: "#E5E5E5",
                            400: "#B88E2F",
                            500: "#B88E2F",
                            600: "#B88E2F",
                            700: "#333",
                            800: "#333",
                            900: "#333"
                        },
                    },
                    boxShadow: {
                        soft: "0 10px 30px rgba(0,0,0,0.08)"
                    },
                    backgroundImage: {
                        "grid": "linear-gradient(to right, rgba(0,0,0,.04) 1px, transparent 1px), linear-gradient(to bottom, rgba(0,0,0,.04) 1px, transparent 1px)"
                    }
                }
            }
        }
    </script>
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
        }

        /* Subtle glass effect */
        .glass {
            background: rgba(255, 255, 255, .7);
            backdrop-filter: blur(10px);
        }

        /* Modal overlay */
        .modal-overlay {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        /* Image preview */
        #imagePreview {
            max-width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
        }
    </style>
</head>

<body
    class="text-[#333] bg-[radial-gradient(1200px_600px_at_80%-10%,rgba(184,142,47,0.12),transparent),radial-gradient(900px_500px_at-10%_10%,rgba(184,142,47,0.08),transparent)]">

    <!-- Top Bar -->
    <div class="w-full bg-brand-900 text-white text-sm">
        <div class="max-w-7xl mx-auto px-4 py-2 flex items-center justify-between">
            <p class="opacity-90">Selamat datang, Admin Arthadaya</p>
            <div class="flex items-center gap-4">
                <a href="#" class="underline hover:no-underline">Lihat Laporan</a>
                <button id="logoutBtn"
                    class="inline-flex items-center gap-2 px-3 py-1 rounded-xl bg-brand-400 text-white hover:bg-brand-500 transition">
                    <i data-feather="log-out" class="w-4 h-4"></i> Keluar
                </button>
            </div>
        </div>
    </div>

    <!-- Sidebar + Content -->
    <div class="flex min-h-[calc(100vh-48px)]">
        <!-- Sidebar -->
        <aside id="sidebar"
            class="fixed md:static inset-y-0 left-0 w-64 bg-gradient-to-b from-brand-700 to-brand-900 text-white flex flex-col shadow-xl transform -translate-x-full md:translate-x-0 transition-transform duration-300 z-50">
            <div
                class="px-6 py-6 text-center text-xl font-bold border-b border-gray-700 flex items-center justify-center gap-2">
                <img src="../../public/images/arthadaya_group.jpg" alt="Arthadaya Logo"
                    class="h-10 w-10 rounded-xl shadow-soft">
                Arthadaya Admin
            </div>
            <nav class="flex-1 px-4 py-6 space-y-2">
                <a href="dashboard.html"
                    class="flex items-center p-3 rounded-xl  hover:bg-brand-600 transition">
                    <i data-feather="grid" class="w-5 h-5 mr-3"></i> Dashboard
                </a>
                <a href="properties.html" class="flex items-center p-3 rounded-xl bg-brand-400 hover:bg-brand-600 transition">
                    <i data-feather="home" class="w-5 h-5 mr-3"></i> Properti
                </a>
                <a href="kendaraan.html" class="flex items-center p-3 rounded-xl hover:bg-brand-500 transition">
                    <i data-feather="truck" class="w-5 h-5 mr-3"></i> Kendaraan
                </a>
                <a href="jasa.html" class="flex items-center p-3 rounded-xl  hover:bg-brand-500 transition">
                    <i data-feather="tool" class="w-5 h-5 mr-3"></i> Jasa
                </a>
                <a href="transactions.html" class="flex items-center p-3 rounded-xl hover:bg-brand-600 transition">
                    <i data-feather="dollar-sign" class="w-5 h-5 mr-3"></i> Transaksi
                </a>
                <a href="clients.html" class="flex items-center p-3 rounded-xl hover:bg-brand-600 transition">
                    <i data-feather="users" class="w-5 h-5 mr-3"></i> Klien
                </a>
                <a href="consultations.html" class="flex items-center p-3 rounded-xl hover:bg-brand-600 transition">
                    <i data-feather="phone" class="w-5 h-5 mr-3"></i> Konsultasi
                </a>
                <a href="settings.html" class="flex items-center p-3 rounded-xl hover:bg-brand-600 transition">
                    <i data-feather="settings" class="w-5 h-5 mr-3"></i> Pengaturan
                </a>
            </nav>
            <div class="px-4 py-4 text-sm border-t border-gray-700 text-center">
                © <span id="year"></span> Arthadaya
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-4 md:p-6 overflow-y-auto">
            <!-- Mobile Menu Toggle -->
            <button id="mobileSidebarBtn"
                class="md:hidden fixed top-14 left-4 z-50 p-2 rounded-xl bg-brand-700 text-white hover:bg-brand-800 transition">
                <i data-feather="menu" class="w-6 h-6"></i>
            </button>

            <!-- Header -->
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
                <h1 class="text-2xl md:text-3xl font-bold text-brand-700">Kelola Properti</h1>
                <div class="flex items-center gap-4 w-full sm:w-auto">
                    <select id="filterType"
                        class="px-4 py-2 rounded-xl border border-brand-200 focus:ring-2 focus:ring-brand-400 outline-none bg-white/80 glass w-full sm:w-auto">
                        <option value="">Semua Tipe</option>
                        <option value="Rumah">Rumah</option>
                        <option value="Tanah">Tanah</option>
                        <option value="Paviliun">Paviliun</option>
                        <option value="Apartemen">Apartemen</option>
                    </select>
                    <select id="filterStatus"
                        class="px-4 py-2 rounded-xl border border-brand-200 focus:ring-2 focus:ring-brand-400 outline-none bg-white/80 glass w-full sm:w-auto">
                        <option value="">Semua Status</option>
                        <option value="Active">Aktif</option>
                        <option value="Inactive">Nonaktif</option>
                    </select>
                    <div
                        class="w-10 h-10 rounded-full bg-gradient-to-r from-brand-400 to-brand-600 flex items-center justify-center text-white font-bold">
                        A
                    </div>
                </div>
            </div>

            <!-- Quick Action -->
            <div class="mb-6">
                <button id="addPropertyBtn"
                    class="inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-brand-400 text-white hover:bg-brand-500 transition shadow-soft">
                    <i data-feather="plus-circle" class="w-5 h-5"></i> Tambah Properti
                </button>
            </div>

            <!-- Properties Table -->
            <div class="glass p-6 rounded-2xl shadow-soft border border-white/60 overflow-x-auto">
                <h2 class="text-lg font-bold mb-4 text-brand-700">Daftar Properti</h2>
                <table class="w-full text-left text-sm">
                    <thead>
                        <tr class="border-b border-brand-200">
                            <th class="py-3 hidden sm:table-cell">Gambar</th>
                            <th class="py-3">Nama Properti</th>
                            <th class="py-3">Tipe</th>
                            <th class="py-3">Lokasi</th>
                            <th class="py-3">Harga</th>
                            <th class="py-3">Status</th>
                            <th class="py-3">Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="propertyTable">
                        <!-- Table rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Modal for Adding/Editing Property -->
            <div id="propertyModal" class="fixed inset-0 hidden modal-overlay z-50 flex items-center justify-center">
                <div class="glass p-6 rounded-2xl shadow-soft border border-white/60 w-full max-w-lg">
                    <h2 id="modalTitle" class="text-lg font-bold mb-4 text-brand-700">Tambah Properti</h2>
                    <form id="propertyForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold text-brand-700 mb-1">Gambar Properti</label>
                            <input type="file" id="propertyImage" accept="image/*"
                                class="w-full border border-brand-200 rounded-xl px-4 py-2 bg-white/80" />
                            <img id="imagePreview" class="mt-2 hidden" alt="Pratinjau Gambar" />
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-brand-700 mb-1">Nama Properti</label>
                            <input type="text" id="propertyName" placeholder="Masukkan nama properti"
                                class="w-full border border-brand-200 rounded-xl px-4 py-2 focus:ring-2 focus:ring-brand-400 outline-none bg-white/80"
                                required />
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-brand-700 mb-1">Tipe Properti</label>
                            <select id="propertyType"
                                class="w-full border border-brand-200 rounded-xl px-4 py-2 focus:ring-2 focus:ring-brand-400 outline-none bg-white/80"
                                required>
                                <option value="Rumah">Rumah</option>
                                <option value="Tanah">Tanah</option>
                                <option value="Paviliun">Paviliun</option>
                                <option value="Apartemen">Apartemen</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-brand-700 mb-1">Lokasi</label>
                            <input type="text" id="propertyLocation" placeholder="Masukkan lokasi"
                                class="w-full border border-brand-200 rounded-xl px-4 py-2 focus:ring-2 focus:ring-brand-400 outline-none bg-white/80"
                                required />
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-brand-700 mb-1">Harga (Rp)</label>
                            <input type="number" id="propertyPrice" placeholder="Masukkan harga"
                                class="w-full border border-brand-200 rounded-xl px-4 py-2 focus:ring-2 focus:ring-brand-400 outline-none bg-white/80"
                                required />
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-brand-700 mb-1">Deskripsi</label>
                            <textarea id="propertyDescription" rows="4" placeholder="Masukkan deskripsi properti"
                                class="w-full border border-brand-200 rounded-xl px-4 py-2 focus:ring-2 focus:ring-brand-400 outline-none bg-white/80"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-brand-700 mb-1">Status</label>
                            <select id="propertyStatus"
                                class="w-full border border-brand-200 rounded-xl px-4 py-2 focus:ring-2 focus:ring-brand-400 outline-none bg-white/80"
                                required>
                                <option value="Active">Aktif</option>
                                <option value="Inactive">Nonaktif</option>
                            </select>
                        </div>
                        <div class="flex gap-4">
                            <button type="submit"
                                class="flex-1 px-4 py-2 rounded-xl bg-brand-400 text-white hover:bg-brand-500 transition shadow-soft">
                                Simpan
                            </button>
                            <button type="button" id="closeModalBtn"
                                class="flex-1 px-4 py-2 rounded-xl bg-gray-500 text-white hover:bg-gray-600 transition shadow-soft">
                                Batal
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script>
        feather.replace();

        // Sidebar toggle for mobile
        const mobileSidebarBtn = document.getElementById('mobileSidebarBtn');
        const sidebar = document.getElementById('sidebar');
        mobileSidebarBtn?.addEventListener('click', () => {
            sidebar.classList.toggle('-translate-x-full');
        });

        // Tahun dinamis di footer
        document.getElementById('year').textContent = new Date().getFullYear();

        // Modal toggle
        const addPropertyBtn = document.getElementById('addPropertyBtn');
        const propertyModal = document.getElementById('propertyModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const modalTitle = document.getElementById('modalTitle');
        const propertyForm = document.getElementById('propertyForm');
        const propertyImage = document.getElementById('propertyImage');
        const imagePreview = document.getElementById('imagePreview');

        addPropertyBtn?.addEventListener('click', () => {
            modalTitle.textContent = 'Tambah Properti';
            propertyForm.reset();
            imagePreview.classList.add('hidden');
            imagePreview.src = '';
            propertyModal.classList.remove('hidden');
        });

        closeModalBtn?.addEventListener('click', () => {
            propertyModal.classList.add('hidden');
        });

        // Close modal when clicking outside
        propertyModal?.addEventListener('click', (e) => {
            if (e.target === propertyModal) {
                propertyModal.classList.add('hidden');
            }
        });

        // Image preview
        propertyImage?.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    imagePreview.src = e.target.result;
                    imagePreview.classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            } else {
                imagePreview.classList.add('hidden');
            }
        });

        // Sample data for properties with images
        const properties = [
            {
                id: 1,
                name: 'Villa Jogja',
                type: 'Rumah',
                location: 'Yogyakarta',
                price: '2500000000',
                status: 'Active',
                image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=100&auto=format&fit=crop'
            },
            {
                id: 2,
                name: 'Tanah Sleman',
                type: 'Tanah',
                location: 'Sleman',
                price: '1200000000',
                status: 'Active',
                image: 'https://images.unsplash.com/photo-1593575473555-7d4fded4b0e8?q=80&w=100&auto=format&fit=crop'
            },
            {
                id: 3,
                name: 'Apartemen Malioboro',
                type: 'Apartemen',
                location: 'Yogyakarta',
                price: '1800000000',
                status: 'Inactive',
                image: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?q=80&w=100&auto=format&fit=crop'
            },
            {
                id: 4,
                name: 'Rumah Bantul',
                type: 'Rumah',
                location: 'Bantul',
                price: '3000000000',
                status: 'Active',
                image: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=100&auto=format&fit=crop'
            }
        ];

        // Filter functionality
        const filterType = document.getElementById('filterType');
        const filterStatus = document.getElementById('filterStatus');
        const propertyTable = document.getElementById('propertyTable');

        function renderTable(data) {
            propertyTable.innerHTML = data.map(item => `
                <tr class="border-b border-brand-200 hover:bg-brand-100/50 transition">
                    <td class="py-3 hidden sm:table-cell">
                        <img src="${item.image}" alt="${item.name}" class="w-12 h-12 object-cover rounded-lg"
                             onerror="this.src='images/fallback-property.jpg'">
                    </td>
                    <td class="py-3">${item.name}</td>
                    <td class="py-3">${item.type}</td>
                    <td class="py-3">${item.location}</td>
                    <td class="py-3">Rp ${Number(item.price).toLocaleString('id-ID')}</td>
                    <td class="py-3">
                        <span class="px-2 py-1 rounded-full ${item.status === 'Active' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'} text-xs">${item.status === 'Active' ? 'Aktif' : 'Nonaktif'}</span>
                    </td>
                    <td class="py-3">
                        <button class="editBtn text-blue-600 hover:text-blue-800 mr-2" data-id="${item.id}">
                            <i data-feather="edit" class="w-4 h-4"></i>
                        </button>
                        <button class="deleteBtn text-red-600 hover:text-red-800" data-id="${item.id}">
                            <i data-feather="trash-2" class="w-4 h-4"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
            feather.replace();
        }

        function applyFilters() {
            const type = filterType.value;
            const status = filterStatus.value;
            let filtered = properties;
            if (type) {
                filtered = filtered.filter(item => item.type === type);
            }
            if (status) {
                filtered = filtered.filter(item => item.status === status);
            }
            renderTable(filtered);
        }

        filterType?.addEventListener('change', applyFilters);
        filterStatus?.addEventListener('change', applyFilters);

        // Edit functionality
        document.addEventListener('click', (e) => {
            if (e.target.closest('.editBtn')) {
                const id = e.target.closest('.editBtn').dataset.id;
                const property = properties.find(p => p.id == id);
                if (property) {
                    modalTitle.textContent = 'Edit Properti';
                    document.getElementById('propertyName').value = property.name;
                    document.getElementById('propertyType').value = property.type;
                    document.getElementById('propertyLocation').value = property.location;
                    document.getElementById('propertyPrice').value = property.price;
                    document.getElementById('propertyDescription').value = property.description || '';
                    document.getElementById('propertyStatus').value = property.status;
                    imagePreview.src = property.image;
                    imagePreview.classList.remove('hidden');
                    propertyModal.classList.remove('hidden');
                }
            }
        });

        // Form submission (placeholder)
        propertyForm?.addEventListener('submit', (e) => {
            e.preventDefault();
            // Add backend integration here
            alert('Properti disimpan! (Integrasi backend diperlukan)');
            propertyModal.classList.add('hidden');
        });

        // Initial render
        renderTable(properties);
    </script>
</body>

</html>